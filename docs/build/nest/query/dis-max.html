<html><head><title>Nest - Dis Max Query</title><meta http-equiv="cache-control" content="no-cache"/><meta http-equiv="pragma" content="no-cache"/><meta http-equiv="content-type" content="text/html;charset=utf-8"/><meta http-equiv="expires" content="0"/><meta name="description" content="elasticsearch"/><meta name="keywords" content="nest, elasticsearch, .net, client"/><meta name="author" content="martijn laarman"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<script src="/scripts/html5shiv.js"></script><link rel="stylesheet" type="text/css" href="/styles/normalize.css"/><link rel="stylesheet" type="text/css" href="/styles/layout.css"/><link rel="stylesheet" type="text/css" href="/styles/pygments.css"/><link rel="stylesheet" type="text/css" href="/styles/pygments.css"/><link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"/><link href="//fonts.googleapis.com/css?family=Ubuntu+Mono|Open+Sans" rel="stylesheet" type="text/css"/><link href="/prettify/prettify.css" type="text/css" rel="stylesheet"/><link href="/prettify/sunburst.css" type="text/css" rel="stylesheet"/><script src="//code.jquery.com/jquery.min.js" type="text/javascript"></script><script type="text/javascript" src="/prettify/prettify.js"></script><script type="text/javascript" src="/prettify/fix_code_tags.js"></script></head><body><div class="wrapper"><header class="header"><div class="actions"><iframe src="//ghbtns.com/github-btn.html?user=elasticsearch&amp;repo=elasticsearch-net&amp;type=fork&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="95" height="20"></iframe><iframe src="//ghbtns.com/github-btn.html?user=elasticsearch&amp;repo=elasticsearch-net&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe></div><img src="/images/nest-nuget-icon.png" width="48" height="48"/><h1 class="nest">NEST</h1><p>Documentation</p></header><div class="divide"></div><div class="middle"><div class="container"><main class="content"><h1 id="dis-max-query">Dis Max Query</h1>
<p>A query that generates the union of documents produced by its subqueries, and that scores each document with the maximum score for that document as produced by any subquery, plus a tie breaking increment for any additional matching subqueries.</p>
<p>This is useful when searching for a word in multiple fields with different boost factors (so that the fields cannot be combined equivalently into a single search field). We want the primary score to be the one associated with the highest boost, not the sum of the field scores (as Boolean Query would give). If the query is “albino elephant” this ensures that “albino” matching one field and “elephant” matching another gets a higher score than “albino” matching both fields. To get this result, use both Boolean Query and DisjunctionMax Query: for each term a DisjunctionMaxQuery searches for it in each field, while the set of these DisjunctionMaxQuery’s is combined into a BooleanQuery.</p>
<p>The tie breaker capability allows results that include the same term in multiple fields to be judged better than results that include this term in only the best of those multiple fields, without confusing this with the better case of two different terms in the multiple fields.The default tie_breaker is 0.0.</p>
<p>This query maps to Lucene DisjunctionMaxQuery.</p>
<pre><code>.Query(qd=&gt;qd
    .Dismax(d=&gt;d
        .Boost(1.2)
        .TieBreaker(0.7)
        .Queries(
            q =&gt; q.MatchAll(),
            q =&gt; q.Term(f=&gt;f.Name, &quot;elasticsearch.pm&quot;)
        )
    )
)
</code></pre></main></div><aside class="left-sidebar"><aside id="menu"><ul><li><h4><a href="/">Home</a><a href="/contributing.html">Contributing</a><a href="/building.html">Building</a><a href="/breaking-changes.html">1.0 Breaking Changes</a><a href="https://github.com/elasticsearch/elasticsearch-net/releases">Release Notes</a></h4></li></ul><ul id="elasticsearch-net"><h4 class="title">Elasticsearch.Net</h4><ul><li><a href="/elasticsearch-net/quick-start.html">Quick Start</a></li><li><a href="/elasticsearch-net/connecting.html">Connecting</a></li><li><a href="/elasticsearch-net/cluster-failover.html">Cluster failover</a></li><li><a href="/elasticsearch-net/building-requests.html">Building requests</a></li><li><a href="/elasticsearch-net/handling-responses.html">Handling responses</a></li><li><a href="/elasticsearch-net/errors.html">Errors</a></li></ul></ul><ul id="nest"><h4 class="title">NEST</h4><ul><li><a href="/nest/quick-start.html">Quick Start</a></li><li><a href="/nest/connecting.html">Connecting</a></li><li><a href="/nest/index-type-inference.html">Type/Index Inference</a></li><li><a href="/nest/handling-responses.html">Handling responses</a></li><li><a href="/nest/writing-queries.html">Writing queries</a></li><li><a href="/nest/tips-tricks.html">Tips & Tricks</a></li></ul><li><h4><a href="/nest/core/"><i class="fa fa-chevron-right"></i>Core</a></h4></li><li><h4><a href="/nest/indices/aliases.html"><i class="fa fa-chevron-right"></i>Indices</a></h4></li><li><h4><a href="/nest/cluster/health.html"><i class="fa fa-chevron-right"></i>Cluster</a></h4></li><li><h4><a href="/nest/search/basics.html"><i class="fa fa-chevron-right"></i>Search</a></h4></li><li><h4><a href="/nest/aggregations/avg.html"><i class="fa fa-chevron-right"></i>Aggregations</a></h4></li><li><h4><a href="/nest/facets/handling.html"><i class="fa fa-chevron-right"></i>Facets</a></h4></li><h4><i class="fa fa-chevron-down"></i>Query DSL</h4><ul><li class="sub"><a href="/nest/query/text.html">text</a></li><li class="sub"><a href="/nest/query/bool.html">bool</a></li><li class="sub"><a href="/nest/query/boosting.html">boosting</a></li><li class="sub"><a href="/nest/query/ids.html">ids</a></li><li class="sub"><a href="/nest/query/custom-score.html">custom_score</a></li><li class="sub"><a href="/nest/query/custom-boost-factor.html">custom_boost_factor</a></li><li class="sub"><a href="/nest/query/constant-score.html">constant_score</a></li><li class="sub"><a href="/nest/query/dis-max.html" class="selected">dis_max</a></li><li class="sub"><a href="/nest/query/field.html">field</a></li><li class="sub"><a href="/nest/query/filtered.html">filtered</a></li><li class="sub"><a href="/nest/query/flt.html">flt</a></li><li class="sub"><a href="/nest/query/flt-field.html">flt_field</a></li><li class="sub"><a href="/nest/query/fuzzy.html">fuzzy</a></li><li class="sub"><a href="/nest/query/has-child.html">has_child</a></li><li class="sub"><a href="/nest/query/match-all.html">match_all</a></li><li class="sub"><a href="/nest/query/mlt.html">mlt</a></li><li class="sub"><a href="/nest/query/mlt-field.html">mlt_field</a></li><li class="sub"><a href="/nest/query/prefix.html">prefix</a></li><li class="sub"><a href="/nest/query/query-string.html">query_string</a></li><li class="sub"><a href="/nest/query/range.html">range</a></li><li class="sub"><a href="/nest/query/span-first.html">span_first</a></li><li class="sub"><a href="/nest/query/span-near.html">span_near</a></li><li class="sub"><a href="/nest/query/span-not.html">span_not</a></li><li class="sub"><a href="/nest/query/span-or.html">span_or</a></li><li class="sub"><a href="/nest/query/span-term.html">span_term</a></li><li class="sub"><a href="/nest/query/term.html">term</a></li><li class="sub"><a href="/nest/query/terms.html">terms</a></li><li class="sub"><a href="/nest/query/top-children.html">top_children</a></li><li class="sub"><a href="/nest/query/wildcard.html">wildcard</a></li><li class="sub"><a href="/nest/query/nested.html">nested</a></li><li class="sub"><a href="/nest/query/custom-filters-score.html">custom_filters_score</a></li><li class="sub"><a href="/nest/query/indices.html">indices</a></li></ul><li><h4><a href="/nest/filter/and.html"><i class="fa fa-chevron-right"></i>Filter DSL</a></h4></li></ul></aside></aside></div><footer class="footer"></footer></div></body></html>